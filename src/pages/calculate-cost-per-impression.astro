---
import Layout from '~/layouts/PageLayout.astro';
import CalculateCostPerImpressionComponent from '~/components/common/CalculateCostPerImpression';
import RelatedTools from '~/components/common/RelatedTools.astro';
import { Icon } from 'astro-icon/components';

const metadata = {
  title: 'Cost Per Impression Calculator | Calculate CPI Instantly',
  description: 'Calculate your Cost Per Impression (CPI) easily with our free online calculator. Understand your exact cost for every single ad view and optimize your campaigns.',
  canonical: 'https://cpmcalculator.online/calculate-cost-per-impression',
  openGraph: {
    type: 'website',
    url: 'https://cpmcalculator.online/calculate-cost-per-impression',
    title: 'Cost Per Impression Calculator | Calculate CPI Instantly',
    description: 'Calculate your Cost Per Impression (CPI) easily with our free online calculator. Understand your exact cost for every single ad view.',
    images: [
      {
        url: '~/assets/images/default.png',
        width: 1200,
        height: 630,
        alt: 'Cost Per Impression Calculator',
      },
    ],
  },
};
---

<Layout metadata={metadata}>
  <!-- Hero Section with Animated Backgrounds -->
  <section class="relative not-prose overflow-hidden min-h-[60vh] flex items-center">
    <div class="absolute inset-0 pointer-events-none" aria-hidden="true">
      <div class="absolute left-1/2 top-0 -translate-x-1/2 w-[1000px] h-[500px] bg-purple-600/30 blur-[120px] rounded-full mix-blend-screen animate-blob"></div>
      <div class="absolute right-0 top-1/4 w-[800px] h-[600px] bg-blue-600/20 blur-[100px] rounded-full mix-blend-screen animate-blob animation-delay-2000"></div>
      <div class="absolute left-0 bottom-0 w-[600px] h-[600px] bg-pink-600/20 blur-[100px] rounded-full mix-blend-screen animate-blob animation-delay-4000"></div>
    </div>

    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 w-full">
      <div class="pt-0 md:pt-[76px] pointer-events-none"></div>
      <div class="py-12 md:py-20 text-center">
        <div class="flex justify-center mb-6">
          <p class="text-base text-secondary dark:text-blue-200 font-bold tracking-wide uppercase bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-600 animate-fade-in-up">
            Ad Performance Metrics
          </p>
        </div>
        <h1 class="text-5xl md:text-6xl font-bold leading-tighter tracking-tighter mb-6 font-heading dark:text-gray-200 animate-fade-in-up animation-delay-150">
          <span class="bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-600">Cost Per Impression</span> Calculator
        </h1>
        <p class="text-xl md:text-2xl text-muted mb-8 dark:text-slate-300 max-w-3xl mx-auto animate-fade-in-up animation-delay-300">
          Calculate the exact cost of every single ad view
        </p>
      </div>
    </div>
  </section>

  <!-- Calculator Section -->
  <section class="relative px-4 sm:px-6 mx-auto lg:px-8 max-w-6xl -mt-8 mb-16">
    <div class="animate-fade-in-up animation-delay-600">
      <CalculateCostPerImpressionComponent client:load />
    </div>
  </section>

  <!-- Information Sections -->
  <section class="px-4 sm:px-6 mx-auto lg:px-8 max-w-6xl pb-16">
    <div class="grid md:grid-cols-2 gap-8 mb-12">
      <!-- What is CPI Card -->
      <div class="bg-white/5 backdrop-blur-2xl rounded-3xl border border-white/10 p-8 shadow-[0_0_40px_rgba(139,92,246,0.1)] animate-fade-in-up animation-delay-750">
        <div class="flex items-center mb-4">
          <Icon name="tabler:info-circle" class="w-8 h-8 text-purple-400 mr-3" />
          <h2 class="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-600">What is CPI?</h2>
        </div>
        <p class="text-gray-700 dark:text-gray-300 leading-relaxed">
          Cost Per Impression (CPI) measures exactly how much you pay for a single view of your ad. Unlike CPM which groups costs by thousands, CPI gives you the granular cost of one individual impression, making it useful for precise budget tracking and small-scale campaigns.
        </p>
      </div>

      <!-- How to Calculate Card -->
      <div class="bg-white/5 backdrop-blur-2xl rounded-3xl border border-white/10 p-8 shadow-[0_0_40px_rgba(139,92,246,0.1)] animate-fade-in-up animation-delay-900">
        <div class="flex items-center mb-4">
          <Icon name="tabler:calculator" class="w-8 h-8 text-blue-400 mr-3" />
          <h2 class="text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-600">CPI Formula</h2>
        </div>
        <p class="text-gray-700 dark:text-gray-300 mb-4">The formula is simple:</p>
        <div class="bg-gradient-to-r from-purple-500/10 to-blue-500/10 p-4 rounded-xl border border-purple-500/20">
          <code class="text-purple-300 font-mono">CPI = Total Cost / Total Impressions</code>
        </div>
      </div>
    </div>

    <!-- Optimization Tips -->
    <div class="bg-white/5 backdrop-blur-2xl rounded-3xl border border-white/10 p-8 shadow-[0_0_40px_rgba(139,92,246,0.1)] mb-12 animate-fade-in-up animation-delay-1050">
      <h2 class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-600 mb-6">How to Optimize Your CPI</h2>
      <div class="grid md:grid-cols-2 gap-4">
        {[
          'Refine your target audience to reduce wasted impressions',
          'A/B test ad creatives to improve engagement rates',
          'Adjust bidding strategies based on time of day',
          'Focus on high-performing platforms for your niche',
          'Monitor frequency to avoid ad fatigue',
        ].map((tip, index) => (
          <div class="flex items-start p-4 rounded-xl bg-gradient-to-r from-purple-500/10 to-transparent border border-purple-500/20">
            <span class="flex-shrink-0 w-8 h-8 flex items-center justify-center rounded-full bg-gradient-to-r from-purple-600 to-pink-600 text-white font-bold mr-3">{index + 1}</span>
            <p class="text-gray-300">{tip}</p>
          </div>
        ))}
      </div>
    </div>

    <!-- FAQ Section -->
    <div class="bg-white/5 backdrop-blur-2xl rounded-3xl border border-white/10 p-8 shadow-[0_0_40px_rgba(139,92,246,0.1)] animate-fade-in-up animation-delay-1200">
      <h2 class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-600 mb-8">Frequently Asked Questions</h2>
      <div class="space-y-6">
        <div class="border-l-4 border-purple-500 pl-6">
          <h3 class="text-xl font-bold text-purple-300 mb-2">CPI vs CPM: What's the difference?</h3>
          <p class="text-gray-400">CPI is the cost for ONE impression, while CPM is the cost for ONE THOUSAND impressions. CPI = CPM / 1000. Use CPI for granular analysis and CPM for general campaign budgeting.</p>
        </div>
        <div class="border-l-4 border-blue-500 pl-6">
          <h3 class="text-xl font-bold text-blue-300 mb-2">What is a good CPI?</h3>
          <p class="text-gray-400">A "good" CPI depends heavily on your industry. Generally, anything under $0.01 per impression is considered efficient for broad reach campaigns, while highly targeted B2B campaigns might have higher CPIs.</p>
        </div>
        <div class="border-l-4 border-pink-500 pl-6">
          <h3 class="text-xl font-bold text-pink-300 mb-2">Does a lower CPI mean better performance?</h3>
          <p class="text-gray-400">Not always. A very low CPI might mean you're getting cheap impressions from irrelevant audiences. It's important to balance low costs with conversion metrics like CTR and ROAS.</p>
        </div>
      </div>
    </div>

    <!-- Related Tools Section -->
    <div class="mt-12 animate-fade-in-up animation-delay-1350">
      <RelatedTools currentPage="/calculate-cost-per-impression" />
    </div>
  </section>
</Layout>

<style>
  .animate-blob {
    animation: blob 7s infinite;
  }
  .animation-delay-2000 {
    animation-delay: 2s;
  }
  .animation-delay-4000 {
    animation-delay: 4s;
  }
  @keyframes blob {
    0% { transform: translate(0px, 0px) scale(1); }
    33% { transform: translate(30px, -50px) scale(1.1); }
    66% { transform: translate(-20px, 20px) scale(0.9); }
    100% { transform: translate(0px, 0px) scale(1); }
  }

  .animate-fade-in-up {
    animation: fadeInUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    opacity: 0;
    transform: translateY(20px);
  }
  
  .animation-delay-150 { animation-delay: 150ms; }
  .animation-delay-300 { animation-delay: 300ms; }
  .animation-delay-600 { animation-delay: 600ms; }
  .animation-delay-750 { animation-delay: 750ms; }
  .animation-delay-900 { animation-delay: 900ms; }
  .animation-delay-1050 { animation-delay: 1050ms; }
  .animation-delay-1200 { animation-delay: 1200ms; }
  .animation-delay-1350 { animation-delay: 1350ms; }

  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
</style>
